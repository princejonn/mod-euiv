convert_to_incorporated_vassal = {
	category = influence
	require_acceptance = no
	is_visible = {
		adm_tech = 12		#Early Modern Administration
		can_have_incorporated_vassals = no		# If this is yes then they have access to the vanilla tech
		FROM = {
			is_subject_of = ROOT
			is_subject_of_type = vassal
		}
	}
	is_allowed = {
		dip_power = 25
		is_at_war = no
		has_regency = no
		has_heir = yes
		NOT = {
			truce_with = FROM
		}
		FROM = {
			is_at_war = no
		}
		FROM = {
			NOT = {
				truce_with = ROOT
			}
		}
		FROM = {
			years_in_vassalage_under = {
				who = ROOT
				years = 10
			}
		}
		FROM = {
			has_opinion = {
				who = ROOT
				value = 190
			}
		}
		FROM = {
			NOT = {
				liberty_desire = 25
			}
		}
	}
	on_accept = {
		add_dip_power = -25
		create_subject = {
			subject_type = incorporated_vassal
			subject = FROM
			keep_liberty_desire = yes
		}
	}
	on_decline = {
	}
	ai_will_do = {
		always = no
	}
}

convert_vassal_to_personal_union = {
	category = influence
	require_acceptance = no
	is_visible = {
		adm_tech = 12		#Early Modern Administration
		OR = {
			FROM = {
				is_subject_of = ROOT
				is_subject_of_type = vassal
			}
			FROM = {
				is_subject_of = ROOT
				is_subject_of_type = incorporated_vassal
			}
		}
	}
	is_allowed = {
		dip_power = 25
		is_at_war = no
		has_regency = no
		has_heir = yes
		NOT = {
			truce_with = FROM
		}
		FROM = {
			is_at_war = no
		}
		FROM = {
			marriage_with = ROOT
		}
		FROM = {
			NOT = {
				truce_with = ROOT
			}
		}
		FROM = {
			years_in_vassalage_under = {
				who = ROOT
				years = 10
			}
		}
		FROM = {
			has_opinion = {
				who = ROOT
				value = 190
			}
		}
		FROM = {
			NOT = {
				liberty_desire = 25
			}
		}
	}
	on_accept = {
		add_dip_power = -25
		create_subject = {
			subject_type = personal_union
			subject = FROM
			keep_liberty_desire = yes
		}
	}
	on_decline = {
	}
	ai_will_do = {
		always = no
	}
}

convert_vassal_to_sovereign_personal_union = {
	category = influence
	require_acceptance = no
	is_visible = {
		adm_tech = 12		#Early Modern Administration
		OR = {
			FROM = {
				is_subject_of = ROOT
				is_subject_of_type = vassal
			}
			FROM = {
				is_subject_of = ROOT
				is_subject_of_type = incorporated_vassal
			}
		}
	}
	is_allowed = {
		dip_power = 25
		is_at_war = no
		has_regency = no
		has_heir = yes
		NOT = {
			truce_with = FROM
		}
		FROM = {
			is_at_war = no
		}
		FROM = {
			marriage_with = ROOT
		}
		FROM = {
			NOT = {
				truce_with = ROOT
			}
		}
		FROM = {
			years_in_vassalage_under = {
				who = ROOT
				years = 10
			}
		}
		FROM = {
			has_opinion = {
				who = ROOT
				value = 190
			}
		}
		FROM = {
			NOT = {
				liberty_desire = 25
			}
		}
	}
	on_accept = {
		add_dip_power = -25
		create_subject = {
			subject_type = sovereign_personal_union
			subject = FROM
			keep_liberty_desire = yes
		}
	}
	on_decline = {
	}
	ai_will_do = {
		always = no
	}
}
